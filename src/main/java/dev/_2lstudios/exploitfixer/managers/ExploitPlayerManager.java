package dev._2lstudios.exploitfixer.managers;

import java.util.HashMap;
import java.util.Map;
import java.util.UUID;

import org.bukkit.Server;
import org.bukkit.entity.Player;
import org.bukkit.plugin.Plugin;

import dev._2lstudios.exploitfixer.exploit.BukkitExploitPlayer;

public class ExploitPlayerManager {
	private final Plugin plugin;
	private final Server server;
	private final ModuleManager moduleManager;
	private final Map<UUID, BukkitExploitPlayer> exploitPlayers = new HashMap<>();
	private int punishments = 0;

	ExploitPlayerManager(final Plugin plugin, final Server server, final ModuleManager moduleManager) {
		this.plugin = plugin;
		this.server = server;
		this.moduleManager = moduleManager;
	}

	public BukkitExploitPlayer get(final UUID uuid) {
		final BukkitExploitPlayer exploitPlayer;

		if (exploitPlayers.containsKey(uuid)) {
			exploitPlayer = exploitPlayers.get(uuid);
		} else {
			exploitPlayer = new BukkitExploitPlayer(this.plugin, moduleManager);
			exploitPlayers.put(uuid, exploitPlayer);
		}

		return exploitPlayer;
	}

	public BukkitExploitPlayer get(final Player player) {
		return get(player.getUniqueId());
	}

	public void remove(final UUID uuid) {
		exploitPlayers.remove(uuid);
	}

	public void remove(final Player player) {
		remove(player.getUniqueId());
	}

	public void reload() {
		exploitPlayers.clear();

		for (final Player player : server.getOnlinePlayers()) {
			get(player);
		}
	}

	public int getSize() {
		return exploitPlayers.size();
	}

	public int getPunishments() {
		return punishments;
	}

	public int addPunishment() {
		return punishments++;
	}
}
